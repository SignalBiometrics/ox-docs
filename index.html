


  

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ox API 0.1.0</title>

    <style>
    </style>
    <link rel="stylesheet" media="screen" href="pub/css/screen.css">
    <link rel="stylesheet" media="print" href="pub/css/print.css">
    <link rel="stylesheet" media="screen" href="pub/css/darkula.css">
    
      <script src="source/javascripts/lib/_jquery.js"></script>
<script src="source/javascripts/lib/_jquery.highlight.js"></script>
<script src="source/javascripts/lib/_lunr.js"></script>
<script src="source/javascripts/lib/_imagesloaded.min.js"></script>
<script src="source/javascripts/lib/_energize.js"></script>
<script src="source/javascripts/app/_lang.js"></script>
<script src="source/javascripts/app/_search.js"></script>
<script src="source/javascripts/app/_toc.js"></script>
<script type="text/javascript">
$(function() {
  loadToc($('#toc'), '.toc-link', '.toc-list-h2, .toc-list-h3, .toc-list-h4, .toc-list-h5, .toc-list-h6', 10);
  setupLanguages($('body').data('languages'));
  $('.content').imagesLoaded( function() {
    recacheHeights();
    refreshToc();
  });
});

window.onpopstate = function() {
  activateLanguage(getLanguageFromQueryString());
};
</script>

    
    <meta name="theme-color" content="#F3F7F9" />

  </head>

  <body data-languages="[&quot;shell&quot;,&quot;http&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="source/images/navbar.png" class="undefined" alt="Navigation">
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="source/images/logo.png" class="logo" alt="Logo">
      
        <div class="lang-selector">
          
            
              <a href="#" data-language-name="shell">Shell</a>
            
          
            
              <a href="#" data-language-name="http">HTTP</a>
            
          
        </div>
      
      
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      
      <div id="toc" class="toc-list-h1">
	  	<ul class="toc-list-h1">
        
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
            
          </li>
        
          <li>
            <a href="#requests" class="toc-h1 toc-link" data-title="Requests">Requests</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#headers" class="toc-h2 toc-link" data-title="Headers">Headers</a>
                    
                  </li>
                
                  <li>
                    <a href="#payload--amp--params" class="toc-h2 toc-link" data-title="Payload &amp; params">Payload &amp; params</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#responses" class="toc-h1 toc-link" data-title="Responses">Responses</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#success" class="toc-h2 toc-link" data-title="Success">Success</a>
                    
                  </li>
                
                  <li>
                    <a href="#failure" class="toc-h2 toc-link" data-title="Failure">Failure</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#authentication" class="toc-h1 toc-link" data-title="Authentication">Authentication</a>
            
          </li>
        
          <li>
            <a href="#beacon" class="toc-h1 toc-link" data-title="Beacon">Beacon</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#addonebeacon" class="toc-h2 toc-link" data-title="addOneBeacon">addOneBeacon</a>
                    
                  </li>
                
                  <li>
                    <a href="#addmanybeacon" class="toc-h2 toc-link" data-title="addManyBeacon">addManyBeacon</a>
                    
                  </li>
                
                  <li>
                    <a href="#getonebeacon" class="toc-h2 toc-link" data-title="getOneBeacon">getOneBeacon</a>
                    
                  </li>
                
                  <li>
                    <a href="#getmanybeacon" class="toc-h2 toc-link" data-title="getManyBeacon">getManyBeacon</a>
                    
                  </li>
                
                  <li>
                    <a href="#deleteonebeacon" class="toc-h2 toc-link" data-title="deleteOneBeacon">deleteOneBeacon</a>
                    
                  </li>
                
                  <li>
                    <a href="#deletemanybeacon" class="toc-h2 toc-link" data-title="deleteManyBeacon">deleteManyBeacon</a>
                    
                  </li>
                
                  <li>
                    <a href="#updateonebeacon" class="toc-h2 toc-link" data-title="updateOneBeacon">updateOneBeacon</a>
                    
                  </li>
                
                  <li>
                    <a href="#updatemanybeacon" class="toc-h2 toc-link" data-title="updateManyBeacon">updateManyBeacon</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#client" class="toc-h1 toc-link" data-title="Client">Client</a>
            
          </li>
        
          <li>
            <a href="#event" class="toc-h1 toc-link" data-title="Event">Event</a>
            
          </li>
        
          <li>
            <a href="#org" class="toc-h1 toc-link" data-title="Org">Org</a>
            
          </li>
        
          <li>
            <a href="#sensor" class="toc-h1 toc-link" data-title="Sensor">Sensor</a>
            
          </li>
        
          <li>
            <a href="#schemas" class="toc-h1 toc-link" data-title="Schemas">Schemas</a>
            
              <ul class="toc-list-h2">
                
                  <li>
                    <a href="#beacon-schema" class="toc-h2 toc-link" data-title="Beacon">Beacon</a>
                    
                  </li>
                
              </ul>
            
          </li>
        
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
            
          </li>
        
		</ul>
      </div>
      
        <ul class="toc-footer">
          
        </ul>
      
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>
<p>Welcome to the Signal Biometrics <code>ox</code> API documentation. This should provide you with all the info you need to collect, store, retrieve and expose time series data</p>
<p>From a high-level perspective, the API allows you to apply CRUD operations to entities using the RESTful connector that you want. The entities you can interact with are:</p>
<ul>
<li>Beacon (an emitting device)</li>
<li>Client (an API client)</li>
<li>Event (a datapoint)</li>
<li>Org (an organisation)</li>
<li>Sensor (a sensing device)</li>
</ul>
<p>Our production URL is<br>
<a href="https://api.signal.bio">https://api.signal.bio/</a></p>
<p>Our staging URL is<br>
<a href="https://api.stage.signal.bio">https://api.stage.signal.bio/</a></p>
<p>You can report issues at<br>
<a href="mailto:api.support@signal.bio">api.support@signal.bio</a></p>
<h1 id="requests">Requests</h1>
<p>Almost all requests <em>need</em> to include a valid JWT token. See the <a href="#authentication">authentication</a> section for more details about this</p>
<h2 id="headers">Headers</h2>
<p>This depends on the endpoint, but as a general rule if the request du not create or modify entities, you will not need to include a header (beside <code>Authorization</code>). If you are passing along a JSON payload however, remember to set the <code>Content-type</code> header as well</p>
<table>
<thead>
<tr>
<th>Header</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>Authorization</td>
<td>bearer <em>{jwt}</em></td>
</tr>
<tr>
<td>Content-type</td>
<td>application/json</td>
</tr>
</tbody>
</table>
<aside class="notice">You must replace <code>{headers}</code> with valid headers</aside>
<h2 id="payload--amp--params">Payload &amp; params</h2>
<p>As a general rule, endpoints that create a single entity will expect a JSON, while those creating many entities will expect an array of these objects</p>
<p>Endpoints that modify entities will either require an <code>id</code> URL parameter and a payload (single), or a JSON consisting of the <code>ids</code> to modify as properties and their changes as an object. Have a look at the <a href="updatemanybeacon">updateManyBeacon</a> for an example of this</p>
<p>Endpoints that do not require a payload (read &amp; delete operations) will only require parameters passed in the URL, with multiple values separated by commas</p>
<aside class="notice">You must replace parameters in <code>{brackets}</code> with your own</aside>
<h1 id="responses">Responses</h1>
<p>Our API responses are JSON objects with the results (or error) assigned to the <code>data</code> property. Our structure liberally adds a few extra properties to the <a href="https://labs.omniti.com/labs/jsend">JSend</a> &quot;specs&quot;:</p>
<blockquote>
<p>Response JSON</p>
</blockquote>
<pre class="highlight tab tab-json"><code>{
  <span class="hljs-attr">"program"</span>: <span class="hljs-string">"ox"</span>,
  <span class="hljs-attr">"version"</span>: <span class="hljs-string">"0.0.1"</span>,
  <span class="hljs-attr">"datetime"</span>: <span class="hljs-string">"2017-10-11T13:10:11.669Z"</span>,
  <span class="hljs-attr">"timestamp"</span>: <span class="hljs-number">1507727411669</span>,
  <span class="hljs-attr">"code"</span>:<span class="hljs-number">200</span>,
  <span class="hljs-attr">"status"</span>: <span class="hljs-string">"success"</span>,
  <span class="hljs-attr">"message"</span>: <span class="hljs-string">"Call successful"</span>,
  <span class="hljs-attr">"data"</span>: {
    <span class="hljs-attr">"status"</span>: <span class="hljs-string">"success"</span>,
    <span class="hljs-attr">"message"</span>: <span class="hljs-string">"OK"</span>,
    <span class="hljs-attr">"code"</span>: <span class="hljs-number">200</span>
  }
}
</code></pre>
<table>
<thead>
<tr>
<th>Property</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>program</code></td>
<td>The name of the API</td>
</tr>
<tr>
<td><code>version</code></td>
<td>The version of the API</td>
</tr>
<tr>
<td><code>datetime</code></td>
<td>When the response was sent (i.e. <code>_new Date</code>)</td>
</tr>
<tr>
<td><code>timestamp</code></td>
<td>When the response was sent (i.e. <code>Date.now()</code>)</td>
</tr>
<tr>
<td><code>code</code></td>
<td>HTTP status of the response</td>
</tr>
<tr>
<td><code>status</code></td>
<td><em>success</em> or <em>failure</em> or <em>error</em></td>
</tr>
<tr>
<td><code>message</code></td>
<td>Additional API message</td>
</tr>
<tr>
<td><code>data</code></td>
<td>The payload or the response</td>
</tr>
</tbody>
</table>
<h2 id="success">Success</h2>
<p>If the request succeed with a <code>200</code>, the response <code>data</code> property will be populated according to the HTTP operation requested by the client and the number of entities</p>
<table>
<thead>
<tr>
<th>Verb</th>
<th>Scope</th>
<th>Type</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>POST</td>
<td>Single</td>
<td>Object</td>
<td>{id, message}</td>
</tr>
<tr>
<td>POST</td>
<td>Collection</td>
<td>Array</td>
<td>[{id, message}]</td>
</tr>
<tr>
<td>GET</td>
<td>Single</td>
<td>Object</td>
<td>{entity}</td>
</tr>
<tr>
<td>GET</td>
<td>Collection</td>
<td>Array</td>
<td>[{entity}]</td>
</tr>
<tr>
<td>PATCH</td>
<td>Single</td>
<td>Object</td>
<td>{id, message}</td>
</tr>
<tr>
<td>PATCH</td>
<td>Collection</td>
<td>Array</td>
<td>[{id, message}]</td>
</tr>
<tr>
<td>DELETE</td>
<td>Single</td>
<td>Object</td>
<td>{id, message}</td>
</tr>
<tr>
<td>DELETE</td>
<td>Collection</td>
<td>Array</td>
<td>[{id, message}]</td>
</tr>
</tbody>
</table>
<h2 id="failure">Failure</h2>
<p>If the request fails witha <code>4xx</code> or <code>5xx</code>, the response <code>data</code> property will be be the same regardless of the HTTP operation but will change depending on the number of entities</p>
<table>
<thead>
<tr>
<th>Verb</th>
<th>Scope</th>
<th>Type</th>
<th>Content</th>
</tr>
</thead>
<tbody>
<tr>
<td>*</td>
<td>Single</td>
<td>Object</td>
<td>{id, message}</td>
</tr>
<tr>
<td>*</td>
<td>Collection</td>
<td>Array</td>
<td>[{id, message}]</td>
</tr>
</tbody>
</table>
<h1 id="authentication">Authentication</h1>
<blockquote>
<p>Header example</p>
</blockquote>
<pre class="highlight"><code>Authorization: bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiYWRtaW4iOnRydWV9.TJVA95OrM7E2cBab30RMHrHDcEfxjoYZgeFONFh7HgQ
</code></pre>
<p>For all API request, <code>ox</code> expects a <a href="https://jwt.io/introduction/">JSON Web Token</a> to be included in a header that looks like the one on the right</p>
<p>The <code>org</code> entity is are the root of our authentication scheme. At this time, only Signal can create new <code>org</code>. Beside this, entities have the right to create, modify or delete entities with a higher tier then themselves. The hiearchy looks like this:</p>
<table>
<thead>
<tr>
<th>Entity</th>
<th>Owner</th>
<th>Tier</th>
</tr>
</thead>
<tbody>
<tr>
<td>Org</td>
<td>Signal Biometrics</td>
<td>Tier 0</td>
</tr>
<tr>
<td>Client</td>
<td>Org</td>
<td>Tier 1</td>
</tr>
<tr>
<td>Beacon</td>
<td>Org</td>
<td>Tier 1</td>
</tr>
<tr>
<td>Sensor</td>
<td>Client</td>
<td>Tier 2</td>
</tr>
<tr>
<td>Event</td>
<td>Client</td>
<td>Tier 2</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell--http"><code><span class="hljs-comment"># 1. create a client</span>
curl -X POST -H <span class="hljs-string">"Content-Type: application/json"</span> <span class="hljs-_">-d</span> <span class="hljs-string">'{client_entity_payload}'</span> -H <span class="hljs-string">"{headers}"</span> https://api.signal.bio/client
<span class="hljs-comment"># returns response.body.data.client_api_key</span>
</code></pre>
<pre class="highlight tab tab-shell--http"><code><span class="hljs-comment"># 2. retrieve a token</span>
curl https://api.signal.bio/client/token/{parent_org_id}/{client_id}/{client_api_key}
<span class="hljs-comment"># returns response.body.data.token</span>
</code></pre>
<pre class="highlight tab tab-shell--http"><code><span class="hljs-comment"># 3. authorize a request with a header </span>
curl -H <span class="hljs-string">"Authorization: bearer {jwt}"</span> https://api.signal.bio/{endpoint}
</code></pre>
<p>Since the API is meant to be accessed programatically, we are not relying on a user/password scheme to grant access to our ressources. Rather, the authentication of a client happens in three steps:</p>
<ol>
<li>An <code>org</code> create a client and get an API key</li>
<li>The client uses this API key to retrieve a token</li>
<li>The client uses this token to authenticate its requests</li>
</ol>
<p>The token expires, but the client do not. Typically, clients will be devices, user accounts interfaces or applications and will be given the cleartext <code>client_api_key</code> as en environement variable or as part of a configuration object</p>
<aside class="warning">Remember that <code>/client</code> is a protected endpoint</aside>
<h1 id="beacon">Beacon</h1>
<p><code>/beacon</code></p>
<p>Beacons collect the readings of sensors, called events. Beacons are typically bluetooth-enabled devices that are connected to the internet and relay back events to our realtime database</p>
<h2 id="addonebeacon">addOneBeacon</h2>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell"><code>curl -X POST https://api.signal.bio/beacon -H <span class="hljs-string">"{headers} -d "</span>{payload}<span class="hljs-string">"
</span></code></pre>
<pre class="highlight tab tab-http"><code><span class="hljs-attribute">POST https://api.signal.io/beacon HTTPS/1.1
Host</span>: api.signal.bio
<span class="hljs-attribute">Content-Type</span>: application/json
<span class="hljs-attribute">Authorization</span>: bearer {jwt}
</code></pre>
<p><code>POST /beacon</code></p>
<p><em>Add a new beacon</em></p>
<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight tab tab-json"><code>{
  <span class="hljs-attr">"parent_org"</span>: <span class="hljs-number">1234123412341234</span>,
  <span class="hljs-attr">"beacon_id"</span>: <span class="hljs-string">"014DB0FE-06D4-4FE3-A81F-14037E8701AA"</span>,
  <span class="hljs-attr">"beacon_env"</span>: <span class="hljs-string">"iOS 9.0"</span>,
  <span class="hljs-attr">"beacon_type"</span>: <span class="hljs-string">"iphone"</span>,
  <span class="hljs-attr">"beacon_version"</span>: <span class="hljs-string">"1.1.1/34"</span>,
  <span class="hljs-attr">"beacon_last_event"</span>: {
      <span class="hljs-attr">"event_sensor"</span>: <span class="hljs-number">2345234523452345</span>,
      <span class="hljs-attr">"event_reading"</span>: <span class="hljs-number">105</span>,
      <span class="hljs-attr">"event_type"</span>: <span class="hljs-string">"heart_rate"</span>,
      <span class="hljs-attr">"event_timestamp"</span>: <span class="hljs-number">1509108148219</span>
  }
}
</code></pre>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>body</td>
<td>body</td>
<td><a href="#beacon-schema">Beacon</a></td>
<td>Beacon object that needs to be added</td>
</tr>
</tbody>
</table>
<h3 id="responses">Responses</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Request was successful</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="#errors">Bad Request</a></td>
<td>Invalid payload</td>
<td><a href="#beacon-schema">Beacon</a></td>
</tr>
<tr>
<td>401</td>
<td><a href="#errors">Unauthorized</a></td>
<td>Invalid token</td>
<td>None</td>
</tr>
</tbody>
</table>
<aside class="warning">You must be authenticated to access this endpoint</aside>
<h2 id="addmanybeacon">addManyBeacon</h2>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell"><code>curl -X POST https://api.signal.bio/beacon -H <span class="hljs-string">"{headers}"</span> <span class="hljs-_">-d</span> <span class="hljs-string">"{payload}"</span>
</code></pre>
<pre class="highlight tab tab-http"><code><span class="hljs-attribute">POST https://api.signal.io/beacon HTTPS/1.1
Host</span>: api.signal.bio
<span class="hljs-attribute">Content-Type</span>: application/json
<span class="hljs-attribute">Authorization</span>: bearer {jwt}
</code></pre>
<p><code>POST /beacon</code></p>
<p><em>Add many beacons</em></p>
<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight tab tab-json"><code>[{
  <span class="hljs-attr">"parent_org"</span>: <span class="hljs-number">1234123412341234</span>,
  <span class="hljs-attr">"beacon_id"</span>: <span class="hljs-string">"014DB0FE-06D4-4FE3-A81F-14037E8701AA"</span>,
  <span class="hljs-attr">"beacon_env"</span>: <span class="hljs-string">"iOS 9.0"</span>,
  <span class="hljs-attr">"beacon_type"</span>: <span class="hljs-string">"iphone"</span>,
  <span class="hljs-attr">"beacon_version"</span>: <span class="hljs-string">"1.1.1/34"</span>,
  <span class="hljs-attr">"beacon_last_event"</span>: {
      <span class="hljs-attr">"event_sensor"</span>: <span class="hljs-number">2345234523452345</span>,
      <span class="hljs-attr">"event_reading"</span>: <span class="hljs-number">105</span>,
      <span class="hljs-attr">"event_type"</span>: <span class="hljs-string">"heart_rate"</span>,
      <span class="hljs-attr">"event_timestamp"</span>: <span class="hljs-number">1509108148219</span>
  }
},
{
  <span class="hljs-attr">"parent_org"</span>: <span class="hljs-number">4321432143214321</span>,
  <span class="hljs-attr">"beacon_id"</span>: <span class="hljs-string">"06D44FE3-014D-B0FE-A81F-14037E8701AA"</span>,
  <span class="hljs-attr">"beacon_env"</span>: <span class="hljs-string">"iOS 8.0"</span>,
  <span class="hljs-attr">"beacon_type"</span>: <span class="hljs-string">"iphone"</span>,
  <span class="hljs-attr">"beacon_version"</span>: <span class="hljs-string">"2.1.1"</span>,
  <span class="hljs-attr">"beacon_last_event"</span>: {}
}]
</code></pre>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>body</td>
<td>body</td>
<td><a href="#beacon-schema">Beacons</a></td>
<td>Array of beacon objects that need to be added</td>
</tr>
</tbody>
</table>
<h3 id="responses">Responses</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Request was successful</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="#errors">Bad Request</a></td>
<td>Invalid payload</td>
<td><a href="#beacon-schema">Beacon</a></td>
</tr>
<tr>
<td>401</td>
<td><a href="#errors">Unauthorized</a></td>
<td>Invalid token</td>
<td>None</td>
</tr>
</tbody>
</table>
<aside class="warning">You must be authenticated to access this endpoint</aside>
<h2 id="getonebeacon">getOneBeacon</h2>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell"><code>curl https://api.signal.bio/beacon/{id} -H <span class="hljs-string">"{headers}"</span>
</code></pre>
<pre class="highlight tab tab-http"><code><span class="hljs-attribute">GET https://api.signal.io/beacon/{id} HTTPS/1.1
Host</span>: api.signal.bio
<span class="hljs-attribute">Authorization</span>: bearer {jwt}
</code></pre>
<p><code>GET /beacon/{id}</code></p>
<p><em>Retrieve a beacon by id</em></p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>url</td>
<td>Integer</td>
<td>Beacon entity id</td>
</tr>
</tbody>
</table>
<h3 id="responses">Responses</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Request was successful</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="#errors">Unauthorized</a></td>
<td>Invalid token</td>
<td>None</td>
</tr>
</tbody>
</table>
<aside class="warning">You must be authenticated to access this endpoint</aside>
<h2 id="getmanybeacon">getManyBeacon</h2>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell"><code>curl https://api.signal.bio/beacon/{id},{id},{id} -H <span class="hljs-string">"{headers}"</span>
</code></pre>
<pre class="highlight tab tab-http"><code><span class="hljs-attribute">GET https://api.signal.io/beacon/{id},{id},{id} HTTPS/1.1
Host</span>: api.signal.bio
<span class="hljs-attribute">Authorization</span>: bearer {jwt}
</code></pre>
<p><code>GET /beacon/{id},{id},{id}</code></p>
<p><em>Retrieve many beacons by id</em></p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ids</td>
<td>url</td>
<td>Integer</td>
<td>Beacon entity ids separated by commas</td>
</tr>
</tbody>
</table>
<h3 id="responses">Responses</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Request was successful</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="#errors">Unauthorized</a></td>
<td>Invalid token</td>
<td>None</td>
</tr>
</tbody>
</table>
<aside class="warning">You must be authenticated to access this endpoint</aside>
<h2 id="deleteonebeacon">deleteOneBeacon</h2>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell"><code>curl -X DELETE https://api.signal.bio/beacon/{id} -H <span class="hljs-string">"{headers}"</span>
</code></pre>
<pre class="highlight tab tab-http"><code><span class="hljs-attribute">DELETE https://api.signal.io/beacon/{id} HTTPS/1.1
Host</span>: api.signal.bio
<span class="hljs-attribute">Authorization</span>: bearer {jwt}
</code></pre>
<p><code>DELETE /beacon/{id}</code></p>
<p><em>Delete a beacon by id</em></p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>url</td>
<td>Integer</td>
<td>Beacon entity id</td>
</tr>
</tbody>
</table>
<h3 id="responses">Responses</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Request was successful</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="#errors">Unauthorized</a></td>
<td>Invalid token</td>
<td>None</td>
</tr>
</tbody>
</table>
<aside class="warning">You must be authenticated to access this endpoint</aside>
<h2 id="deletemanybeacon">deleteManyBeacon</h2>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell"><code>curl -X DELETE https://api.signal.bio/beacon/{id},{id},{id} -H <span class="hljs-string">"{headers}"</span>
</code></pre>
<pre class="highlight tab tab-http"><code><span class="hljs-attribute">DELETE https://api.signal.io/beacon/{id},{id},{id} HTTPS/1.1
Host</span>: api.signal.bio
<span class="hljs-attribute">Authorization</span>: bearer {jwt}
</code></pre>
<p><code>DELETE /beacon/{id},{id},{id}</code></p>
<p><em>Delete many beacons by id</em></p>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ids</td>
<td>url</td>
<td>Integer</td>
<td>Beacon entity id separated by commas</td>
</tr>
</tbody>
</table>
<h3 id="responses">Responses</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Request was successful</td>
<td>None</td>
</tr>
<tr>
<td>401</td>
<td><a href="#errors">Unauthorized</a></td>
<td>Invalid token</td>
<td>None</td>
</tr>
</tbody>
</table>
<aside class="warning">You must be authenticated to access this endpoint</aside>
<h2 id="updateonebeacon">updateOneBeacon</h2>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell"><code>curl -X PUT https://api.signal.bio/beacon -H <span class="hljs-string">"{headers}"</span> <span class="hljs-_">-d</span> <span class="hljs-string">"{payload}"</span>
</code></pre>
<pre class="highlight tab tab-http"><code><span class="hljs-attribute">PUT https://api.signal.io/beacon HTTPS/1.1
Host</span>: api.signal.bio
<span class="hljs-attribute">Content-Type</span>: application/json
<span class="hljs-attribute">Authorization</span>: bearer {jwt}
</code></pre>
<p><code>PUT /beacon</code></p>
<p><em>Update an existing beacon</em></p>
<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight tab tab-json"><code>{ 
    <span class="hljs-attr">"1234123412341234"</span>: {
        <span class="hljs-attr">"beacon_env"</span>: <span class="hljs-string">"iOS 10.0"</span>,
        <span class="hljs-attr">"beacon_type"</span>: <span class="hljs-string">"iphone"</span>,
        <span class="hljs-attr">"beacon_version"</span>: <span class="hljs-string">"2.2.0/5"</span>
    }
}
</code></pre>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>body</td>
<td>body</td>
<td>Object</td>
<td>Key/value pairs of entities and updates</td>
</tr>
</tbody>
</table>
<h3 id="responses">Responses</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Request was successful</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="#errors">Bad Request</a></td>
<td>Invalid payload</td>
<td><a href="#beacon-schema">Beacon</a></td>
</tr>
<tr>
<td>401</td>
<td><a href="#errors">Unauthorized</a></td>
<td>Invalid token</td>
<td>None</td>
</tr>
</tbody>
</table>
<aside class="warning">You must be authenticated to access this endpoint</aside>
<h2 id="updatemanybeacon">updateManyBeacon</h2>
<blockquote>
<p>Code samples</p>
</blockquote>
<pre class="highlight tab tab-shell"><code>curl -X PUT https://api.signal.bio/beacon -H <span class="hljs-string">"{headers}"</span> <span class="hljs-_">-d</span> <span class="hljs-string">"{payload}"</span>
</code></pre>
<pre class="highlight tab tab-http"><code><span class="hljs-attribute">PUT https://api.signal.io/beacon HTTPS/1.1
Host</span>: api.signal.bio
<span class="hljs-attribute">Content-Type</span>: application/json
<span class="hljs-attribute">Authorization</span>: bearer {jwt}
</code></pre>
<p><code>PUT /beacon</code></p>
<p><em>Update many existing beacons</em></p>
<blockquote>
<p>Body parameter</p>
</blockquote>
<pre class="highlight tab tab-json"><code>{   
    <span class="hljs-attr">"1234123412341234"</span>: {
        <span class="hljs-attr">"beacon_env"</span>: <span class="hljs-string">"iOS 10.0"</span>,
        <span class="hljs-attr">"beacon_type"</span>: <span class="hljs-string">"iphone"</span>,
        <span class="hljs-attr">"beacon_version"</span>: <span class="hljs-string">"2.2.0/5"</span>
    },
    <span class="hljs-attr">"4321432143214321"</span>: {
        <span class="hljs-attr">"beacon_env"</span>: <span class="hljs-string">"iOS 11.0"</span>,
        <span class="hljs-attr">"beacon_type"</span>: <span class="hljs-string">"ipad"</span>,
        <span class="hljs-attr">"beacon_version"</span>: <span class="hljs-string">"1.2.0"</span>
    }
}
</code></pre>
<h3 id="parameters">Parameters</h3>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>In</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>body</td>
<td>body</td>
<td>Object</td>
<td>Key/value pairs of entities and updates</td>
</tr>
</tbody>
</table>
<h3 id="responses">Responses</h3>
<table>
<thead>
<tr>
<th>Status</th>
<th>Meaning</th>
<th>Description</th>
<th>Schema</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>Request was successful</td>
<td>None</td>
</tr>
<tr>
<td>400</td>
<td><a href="#errors">Bad Request</a></td>
<td>Invalid payload</td>
<td><a href="#beacon-schema">Beacon</a></td>
</tr>
<tr>
<td>401</td>
<td><a href="#errors">Unauthorized</a></td>
<td>Invalid token</td>
<td>None</td>
</tr>
</tbody>
</table>
<aside class="warning">You must be authenticated to access this endpoint</aside>
<h1 id="client">Client</h1>
<h1 id="event">Event</h1>
<h1 id="org">Org</h1>
<h1 id="sensor">Sensor</h1>
<h1 id="schemas">Schemas</h1>
<p>Schemas <strong>might not</strong> be identical our internal representation (i.e. models) of the entities or even how entities are returned when queried. To illustrate this, we are including examples payload that should be passed with POST requests (<em>Request Payload</em>), and what is the expected results from GET requests (<em>Response Payload</em>)</p>
<p>There is also table with <em>Appended Values</em> and <em>Modified Values</em>. <em>Appended Values</em> are added during the creation or modification of entities, while <em>Modified Values</em> are changed on the fly, for instance when casting a type into another</p>
<aside class="notice">Remember that the <i>Response Payload</i> will be in <code>response.data</code></aside>
<h2 id="beacon-schema">Beacon</h2>
<blockquote>
<p>Request Payload</p>
</blockquote>
<pre class="highlight tab tab-json"><code>{
  <span class="hljs-attr">"beacon_id"</span>: <span class="hljs-string">"014DB0FE-06D4-4FE3-A81F-14037E8701AA"</span>,
  <span class="hljs-attr">"beacon_env"</span>: <span class="hljs-string">"iOS 9.0"</span>,
  <span class="hljs-attr">"beacon_type"</span>: <span class="hljs-string">"iphone"</span>,
  <span class="hljs-attr">"beacon_version"</span>: <span class="hljs-string">"1.1.1/34"</span>,
  <span class="hljs-attr">"beacon_last_event"</span>: {
    <span class="hljs-attr">"foo"</span>: <span class="hljs-string">"bar"</span>
  },
  <span class="hljs-attr">"parent_org"</span>: <span class="hljs-number">1234123412341234</span>,
}
</code></pre>
<blockquote>
<p>Return Payload</p>
</blockquote>
<pre class="highlight tab tab-json"><code>{
  <span class="hljs-attr">"beacon_id"</span>: <span class="hljs-string">"014DB0FE-06D4-4FE3-A81F-14037E8701AA"</span>,
  <span class="hljs-attr">"beacon_env"</span>: <span class="hljs-string">"iOS 9.0"</span>,
  <span class="hljs-attr">"beacon_type"</span>: <span class="hljs-string">"iphone"</span>,
  <span class="hljs-attr">"beacon_version"</span>: <span class="hljs-string">"1.1.1/34"</span>,
  <span class="hljs-attr">"beacon_last_event"</span>: {
    <span class="hljs-attr">"foo"</span>: <span class="hljs-string">"bar"</span>
  },
  <span class="hljs-attr">"parent_org"</span>: {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"1234123412341234"</span>,
    <span class="hljs-attr">"kind"</span>: <span class="hljs-string">"Org"</span>,
    <span class="hljs-attr">"path"</span>: [
      <span class="hljs-string">"Org"</span>,
      <span class="hljs-string">"1234123412341234"</span>
    ]
  },
  <span class="hljs-attr">"created_at"</span>: <span class="hljs-string">"2018-01-16T23:25:25.685Z"</span>,
  <span class="hljs-attr">"modified_at"</span>: <span class="hljs-string">"2018-05-17T11:36:55.907Z"</span>,
}
</code></pre>
<h3 id="properties">Properties</h3>
<table>
<thead>
<tr>
<th>Name</th>
<th>Type</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>parent_org</td>
<td>Integer</td>
<td>true</td>
<td>The id of this beacon's parent org</td>
</tr>
<tr>
<td>beacon_id</td>
<td>String</td>
<td>true</td>
<td>Custom local id of this device</td>
</tr>
<tr>
<td>beacon_env</td>
<td>String</td>
<td>true</td>
<td>Device OS or model (including version)</td>
</tr>
<tr>
<td>beacon_type</td>
<td>String</td>
<td>true</td>
<td>Device type</td>
</tr>
<tr>
<td>beacon_version</td>
<td>String</td>
<td>true</td>
<td>Version number of the Signal app</td>
</tr>
<tr>
<td>beacon_last_event</td>
<td>Object(<a href="#event-schema">Event</a>)</td>
<td>false</td>
<td>The last event captured by this beacon</td>
</tr>
</tbody>
</table>
<h3 id="appended-values">Appended Values</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>Id of the entity</td>
</tr>
<tr>
<td>created_at</td>
<td>When the entity was created</td>
</tr>
<tr>
<td>modified_at</td>
<td>When the entity was last modified</td>
</tr>
</tbody>
</table>
<h3 id="modified-values">Modified Values</h3>
<table>
<thead>
<tr>
<th>Property</th>
<th>From</th>
<th>To</th>
</tr>
</thead>
<tbody>
<tr>
<td>parent_org</td>
<td>Integer</td>
<td>Object(Key)</td>
</tr>
</tbody>
</table>
<h1 id="errors">Errors</h1>
<p>The <code>ox</code> API uses the following error codes:</p>
<table>
<thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.1">400</a></td>
<td>Bad Request — Your request is invalid</td>
</tr>
<tr>
<td><a href="https://tools.ietf.org/html/rfc7235#section-3.1">401</a></td>
<td>Unauthorized — Your API key is wrong</td>
</tr>
<tr>
<td><a href="https://tools.ietf.org/html/rfc7231#section-6.5.4">404</a></td>
<td>Not Found — The ressource was not found</td>
</tr>
</tbody>
</table>

      </div>
      <div class="dark-box">
        
          <div class="lang-selector">
            
              
                <a href="#" data-language-name="shell">Shell</a>
              
            
              
                <a href="#" data-language-name="http">HTTP</a>
              
            
          </div>
        
      </div>
    </div>
  </body>
</html>
